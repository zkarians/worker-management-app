# 📸 보고서 스크린샷 기능 가이드

## ✅ 현재 구현 상태

### 정상 작동 방식

1. **보고서 페이지 접속**
   - ✅ 좌측 메뉴: **보임** (정상)
   - ✅ 보고서 컨텐츠: **보임**

2. **스크린샷 버튼 클릭**
   - ✅ 좌측 메뉴: **캡처되지 않음** (제외됨)
   - ✅ 보고서 컨텐츠: **캡처됨** (125% 확대)
   - ✅ 파일 다운로드: `일일근무보고서_2025-12-03.png`

3. **인쇄 버튼 클릭**
   - ✅ 좌측 메뉴: **인쇄되지 않음** (CSS @media print로 제외)
   - ✅ 보고서 컨텐츠: **인쇄됨** (A4 용지 크기)

---

## 🔍 작동 원리

### 스크린샷 캡처 영역

```typescript
// reportRef가 가리키는 영역만 캡처
<div ref={reportRef} className="...">
  {/* 보고서 컨텐츠만 */}
  {/* 메뉴는 이 div 밖에 있으므로 자동 제외 */}
</div>
```

### 레이아웃 구조

```
┌─────────────────────────────────┐
│ DashboardLayout                 │
│  ┌──────────┬─────────────────┐│
│  │ Sidebar  │ 보고서 페이지     ││
│  │ (메뉴)    │                  ││
│  │          │ ┌─────────────┐  ││
│  │          │ │ reportRef   │  ││ ← 스크린샷 캡처 영역
│  │          │ │ (보고서 내용) │  ││
│  │          │ └─────────────┘  ││
│  └──────────┴─────────────────┘│
└─────────────────────────────────┘
```

---

## 📝 스크린샷 기능 개선사항

### 이전 문제
- ❌ 스크린샷 캡처가 제대로 작동하지 않음
- ❌ 오류 처리 부족

### 현재 개선사항
- ✅ 로딩 커서 표시 (캡처 중 `wait` 커서)
- ✅ DOM 안정화 지연 (100ms)
- ✅ 명확한 캡처 영역 지정
- ✅ 성공 알림 메시지
- ✅ 에러 처리 개선

---

## 🎯 사용 방법

### 1단계: 보고서 페이지 접속
```
대시보드 → 보고서 메뉴 클릭
```

### 2단계: 날짜 선택
```
상단의 날짜 선택기에서 원하는 날짜 선택
```

### 3단계: 스크린샷 캡처
```
[스크린샷] 버튼 클릭
↓
자동으로 PNG 파일 다운로드
↓
파일명: 일일근무보고서_2025-12-03.png
```

---

## 🔧 문제 해결

### 문제: 메뉴가 사라짐

**증상**: 보고서 페이지에 들어갔을 때 좌측 메뉴가 보이지 않음

**원인 가능성**:
1. 브라우저 창 크기가 작아서 반응형으로 메뉴가 숨겨짐
2. SidebarContext 상태 문제
3. CSS 충돌

**해결 방법**:
1. 브라우저 창을 키워보세요
2. 페이지 새로고침 (F5)
3. 개발자 도구에서 `aside` 태그 확인

### 문제: 스크린샷이 저장되지 않음

**증상**: 스크린샷 버튼을 눌러도 파일이 다운로드되지 않음

**해결 방법**:
1. 브라우저 팝업 차단 해제
2. 다운로드 폴더 권한 확인
3. 콘솔 에러 확인 (F12)

### 문제: 스크린샷에 메뉴가 포함됨

**증상**: 캡처된 이미지에 좌측 메뉴가 같이 찍힘

**원인**: 이론적으로 불가능 (reportRef는 보고서 영역만 가리킴)

**확인 사항**:
- html2canvas가 올바르게 작동하는지 확인
- reportRef가 올바른 div를 가리키는지 확인

---

## 📱 모바일에서 사용

모바일에서도 동일하게 작동합니다:
1. 보고서 페이지 접속
2. 스크린샷 버튼 클릭
3. 이미지가 갤러리에 저장됨

---

## 🎨 스크린샷 품질

- **해상도**: 125% (1.25배)
- **포맷**: PNG
- **배경**: 흰색
- **크기**: A4 용지 크기 기준

---

## 💡 팁

### 고화질 스크린샷
현재 125% 확대로 설정되어 있어 충분히 선명합니다.

### 여러 날짜 스크린샷
1. 날짜 변경
2. 스크린샷 클릭
3. 반복

### 인쇄와 스크린샷 차이
- **인쇄**: 실제 프린터로 출력
- **스크린샷**: PNG 이미지로 저장

---

**문제가 계속되면 구체적인 증상을 알려주세요!** 😊
